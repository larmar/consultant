<odoo>
	<data>

        <!--Move Opportunity field from Other Information tab to show before Sales Hourly Rate field-->
        <record id="nox_sale_view_inherit123" model="ir.ui.view">
            <field name="name">sale.order.form.sale_crm.hide.opportunity</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale_crm.sale_view_inherit123"/>
            <field name="arch" type="xml">
                <field name="opportunity_id" position="attributes">
                    <attribute name="invisible">True</attribute>
                </field>
            </field>
        </record>

		<record id="view_sale_nox_opportunity_order_form" model="ir.ui.view">
            <field name="name">sale.nox.opportunity.order.form</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">
            	<notebook position="before">
            		<group>
                        <div class="row">
                            <h3 style="padding-left:15px;">NOX Order Info</h3>
                        </div>
                        <newline/>
                        <group name="nox_opportunity_left">
            				<field name="nox_contract_signed"/>
		    				<field name="nox_is_startdate"/>
		    				<field name="nox_is_enddate"/>
                            <field name="nox_followup_startdate" readonly="1" attrs="{'invisible':[('nox_followup_startdate','=',False)]}"/>
                            <field name="nox_followup_enddate" readonly="1" attrs="{'invisible':[('nox_followup_enddate','=',False)]}"/>
		    			</group>
                        <group name="nox_opportunity_right">
                            <field name="opportunity_id_copy" attrs="{'invisible': [('state', 'in', ('draft', 'sent'))]}"/>
		    				<field name="nox_sales_hourly_rate"/>
                            <field name="nox_cost_hourly_rate"/>
                    		<field name="nox_ftepercent" widget="progressbar" readonly="1"/>
		    				<label string="" colspan="1"/>
		    				<field name="nox_ftepercent_temp" nolabel="1" class="oe_edit_only" colspan="1"/>
                            <field name="nox_sum_hours"/>
		    			</group>
	    			</group>

            	</notebook>

                <xpath expr="//field[@name='order_line']/form[1]/group[1]/group[1]/field[@name='product_id']" position="after">
                    <field name="product_dummy_id" string="" readonly="1" attrs="{'invisible':[('product_dummy_check','=',False)]}"/>
                    <field name="product_dummy_check" invisible="1"/>
                    <field name="consultant_line_check" invisible="1"/>
                    <field name="consultant_id" invisible="1"/>
                </xpath>

                <xpath expr="//field[@name='order_line']/form[1]/group[1]/group[1]/field[@name='product_id']" position="attributes">
                    <attribute name="attrs">{'readonly': ['|', '|', ('qty_invoiced', '&gt;', 0), ('procurement_ids', '!=', []), ('consultant_line_check','=',True)], 'invisible':[('product_dummy_check','=',True)]}</attribute>
                </xpath>

                <xpath expr="//field[@name='order_line']/tree[1]/field[@name='product_id']" position="after">
                    <field name="product_dummy_id" string="" readonly="1" attrs="{'invisible':[('product_dummy_check','=',False)]}"/>
                    <field name="product_dummy_check" invisible="1"/>
                    <field name="consultant_line_check" invisible="1"/>
                    <field name="consultant_id" invisible="1"/>
                </xpath>

                <xpath expr="//field[@name='order_line']/tree[1]/field[@name='product_id']" position="attributes">
                    <attribute name="attrs">{'readonly': ['|', '|', ('qty_invoiced', '&gt;', 0), ('procurement_ids', '!=', []), ('consultant_line_check','=',True)], 'invisible':[('product_dummy_check','=',True)]}</attribute>
                </xpath>

            </field>
        </record>

        <!-- Sale Order search view -->
        <record id="view_sales_nox_order_filter" model="ir.ui.view">
            <field name="name">sale.order.nox.order.select</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_sales_order_filter"/>
            <field name="arch" type="xml">
                <filter name="message_needaction" position="after">
                    <separator/>
                    <!-- Filter Orders in def search function using context -->
                    <filter name="nox_not_started" string="Not Started" context="{'nox_not_started': 1}"/>
                    <filter name="nox_started" string="Started" context="{'nox_started': 1}"/>
                    <filter name="nox_ended" string="Ended" context="{'nox_ended': 1}"/>
                </filter>
            </field>
        </record>

	</data>
</odoo>