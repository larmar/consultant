<?xml version="1.0" encoding="UTF-8"?>
<odoo>
	<data>

		<!-- filter Products list by removing products from Ongoing Sales Order -->
		<record id="view_sale_nox_opportunity_order_product_filters" model="ir.ui.view">
            <field name="name">sale.nox.opportunity.order.product.filters</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="nox_opportunity_order.view_sale_nox_opportunity_order_form"/>
            <field name="arch" type="xml">

            	<field name="nox_product1" position="attributes">
            		<attribute name="context">{'product_filter_so_po': True}</attribute>
            	</field>

            	<field name="nox_product2" position="attributes">
            		<attribute name="context">{'product_filter_so_po': True}</attribute>
            	</field>

            </field>
        </record>

        <record id="view_order_nox_product_filters" model="ir.ui.view">
            <field name="name">sale.order.nox.product.filters</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">

            	<xpath expr="//field[@name='order_line']/form[1]/group[1]/group[1]/field[@name='product_id']" position="attributes">
            		<attribute name="context">{'partner_id':parent.partner_id, 'quantity':product_uom_qty, 'pricelist':parent.pricelist_id, 'uom':product_uom, 'uom_qty_change':True, 'company_id': parent.company_id, 'product_filter_so_po': True}</attribute>
            	</xpath>

            	<xpath expr="//field[@name='order_line']/tree[1]/field[@name='product_id']" position="attributes">
            		<attribute name="context">{'partner_id':parent.partner_id, 'quantity':product_uom_qty, 'pricelist':parent.pricelist_id, 'uom':product_uom, 'company_id': parent.company_id, 'product_filter_so_po': True}</attribute>
            	</xpath>

            </field>
        </record>

	</data>
</odoo>
