<?xml version="1.0"?>
<openerp>
  <data>
  
    <!-- Action to open consultant -->
    <act_window id="action_consultant_consult"
      name="Consultant"
      res_model="consultant.consult"
      view_mode="tree,form" />

    <!-- Menu item for cunsultant -->
    <menuitem id="menu_consultant_consult"
      name="Consultant"
      parent="hr.menu_hr_root"
      sequence="25"
      action="action_consultant_consult" />

    <!-- Menu for Consultants Configuration -->
    <menuitem id="menu_consultant_configuration"
        name="Consultant"
        parent="hr.menu_human_resources_configuration"
        sequence="20"/>


    <!-- Consultant view -->
    <record id="view_form_consultant_consult" model="ir.ui.view">
      <field name="name">Consultants Form</field>
      <field name="model">consultant.consult</field>
      <field name="arch" type="xml">
        <form>
          <header>
            <field name="state" widget="statusbar"
                clickable="Tru" statusbar_visible="draft,open,progress,done" />
          </header>
          <sheet>
            <div class="oe_title">
               <label for="name" class="oe_edit_only"/>
               <h1>
                  <field name="name" placeholder="Consultant's Name" required="1"/>
               </h1>
            </div>
            <group name="group_top">
              <group name="group_left">
                <field name="linkedin" widget="url" />
                <field name="availible" />
              </group>
              <group name="group_right">
                <field name="priority" widget="priority" />
                <field name="partner_id" />
                <field name="user_id" />
              </group>
            </group>
                    <notebook>
                        <page string="Customer ref" autofocus="autofocus">
                            <field name="customer_ids" widget="many2many_kanban">
                              <kanban>
                                    <field name="color"/>
                                    <field name="name"/>
                                    <field name="title"/>
                                    <field name="type"/>
                                    <field name="email"/>
                                    <field name="parent_id"/>
                                    <field name="is_company"/>
                                    <field name="function"/>
                                    <field name="phone"/>
                                    <field name="street"/>
                                    <field name="street2"/>
                                    <field name="zip"/>
                                    <field name="city"/>
                                    <field name="country_id"/>
                                    <field name="mobile"/>
                                    <field name="fax"/>
                                    <field name="state_id"/>
                                    <field name="image"/>
                                    <field name="lang"/>
                                    <templates>
                                        <t t-name="kanban-box">
                                            <t t-set="color" t-value="kanban_color(record.color.raw_value)"/>
                                            <div t-att-class="color + (record.title.raw_value == 1 ? ' oe_kanban_color_alert' : '') + ' oe_kanban_global_click'">
                                                <a t-if="!read_only_mode" type="delete" class="fa fa-times pull-right"/>
                                                <div class="o_kanban_image">
                                                    <img t-if="record.image.raw_value" t-att-src="'data:image/png;base64,'+record.image.raw_value"/>
                                                    <t t-if="!record.image.raw_value">
                                                        <img t-if="record.type.raw_value === 'delivery'" t-att-src='_s + "/base/static/src/img/truck.png"'/>
                                                        <img t-if="record.type.raw_value === 'invoice'" t-att-src='_s + "/base/static/src/img/money.png"'/>
                                                        <t t-if="record.type.raw_value !== 'invoice' &amp;&amp; record.type.raw_value !== 'delivery'">
                                                            <img t-if="record.is_company.raw_value === true" t-att-src='_s + "/base/static/src/img/company_image.png"'/>
                                                            <img t-if="record.is_company.raw_value === false" t-att-src='_s + "/base/static/src/img/avatar.png"'/>
                                                        </t>
                                                    </t>
                                                </div>
                                                <div class="oe_kanban_details">
                                                    <field name="name"/>
                                                    <div t-if="record.function.raw_value"><field name="function"/></div>
                                                    <div t-if="record.email.raw_value"><field name="email"/></div>
                                                    <div t-if="record.type.raw_value != 'contact'">
                                                        <div>
                                                            <field name="zip"/>
                                                            <field name="city"/>
                                                        </div>
                                                        <field t-if="record.state_id.raw_value" name="state_id"/>
                                                        <field name="country_id"/>
                                                    </div>
                                                    <div t-if="record.phone.raw_value">Phone: <field name="phone"/></div>
                                                    <div t-if="record.mobile.raw_value">Mobile: <field name="mobile"/></div>
                                                    <div t-if="record.fax.raw_value">Fax: <field name="fax"/></div>
                                                </div>
                                            </div>
                                        </t>
                                    </templates>
                                </kanban>
                              </field>
                        </page>
                        <page string="Profile">
                          <group name="Profile">
                            <field name="industry_ids" widget="many2many_tags" />
                            <field name="role_ids" widget="many2many_tags" />
                            <field name="certificate_ids" widget="many2many_tags" />
                            <field name="competence_ids" widget="many2many_tags" />
                          </group>
                        </page>
            </notebook>
          </sheet>
          <div class="oe_chatter">
            <field name="message_follower_ids" widget="mail_followers"/>
            <field name="message_ids" widget="mail_thread"/>
          </div>
        </form>
      </field>
    </record>

    <record id="view_tree_consultants_consultant" model="ir.ui.view">
      <field name="name">Consultants Tree</field>
      <field name="model">consultant.consult</field>
      <field name="arch" type="xml">
        <tree>
          <field name="name" />
          <field name="availible" />
          <field name="priority" />
        </tree>
      </field>
    </record>

    <!-- Consultants Stages -->
    <record id="consultant_stage_form" model="ir.ui.view">
        <field name="name">consultant.stage.form</field>
        <field name="model">consultant.stage</field>
        <field name="arch" type="xml">
            <form string="Stages">
                <sheet>
                    <group col="4">
                        <field name="name"/>
                        <field name="sequence"/>
                        <field name="fold"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="consultant_stage_tree" model="ir.ui.view">
        <field name="name">consultant.stage.tree</field>
        <field name="model">consultant.stage</field>
        <field name="arch" type="xml">
            <tree string="Stages" editable="bottom">
                <field name="name"/>
                <field name="sequence"/>
                <field name="fold"/>
            </tree>
        </field>
    </record>

    <record id="action_consultant_stage" model="ir.actions.act_window">
        <field name="name">Stages</field>
        <field name="res_model">consultant.stage</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
    </record>

    <menuitem id="menu_consultant_configuration_stages"
        parent="menu_consultant_configuration"
        sequence="1"
        action="action_consultant_stage"/>

  </data>
</openerp>
