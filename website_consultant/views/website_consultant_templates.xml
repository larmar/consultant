<odoo>

    <template id="assets_frontend" inherit_id="website.assets_frontend" name="Website Consultant Profiles">
      <xpath expr="." position="inside">
            <link rel='stylesheet' type="text/css" href='/website_consultant/static/src/css/website_consultant.css'/>
            <script type="text/javascript" src="/website_consultant/static/src/js/website_consultant.js"></script>
      </xpath>
    </template>

    <template id="portal_my_home_menu_consultant_profile" name="Portal layout : consultant menu entries" inherit_id="website_portal.portal_layout" priority="25">
        <xpath expr="//ul[contains(@class,'o_portal_submenu')]" position="inside">
            <li groups="website_consultant.group_portal_consultant">
                <a href="/my/consultants">Profiles</a>
            </li>
        </xpath>
    </template>

    <template id="portal_my_home_consultants" name="Portal My Home : consultant entries" inherit_id="website_portal.portal_my_home" priority="25">
        <xpath expr="//div[contains(@class,'o_my_home_content')]" position="inside">
            <h3 class="page-header" groups="website_consultant.group_portal_consultant">
                <a href="/my/consultants">Your Profiles
                    <small class="ml8">
                        <t t-if="profiles_count">
                            <span class='badge'><t t-esc="profiles_count"/></span>
                        </t>
                        <t t-if="not profiles_count">
                            There are currently no consultant profiles linked to your account.
                        </t>
                    </small>
                </a>
            </h3>
        </xpath>
    </template>

    <template id="portal_my_consultants" name="My Profiles">
      <t t-call="website_portal.portal_layout">
        <h3 class="page-header">Your Profiles</h3>
        <t t-if="not consultants">
            <p>There are currently no consultant profiles linked to your account.</p>
        </t>
        <t t-if="consultants">
            <table class="table table-hover o_my_status_table">
                <thead>
                    <tr class="active">
                        <th>Consultant Name</th>
                        <th>Next Available</th>
                    </tr>
                </thead>
                <t t-foreach="consultants" t-as="consultant">
                    <tr>
                        <td>
                            <a t-attf-href="/my/consultants/#{consultant.id}?#{keep_query()}"><t t-esc="consultant.name"/></a>
                        </td>
                        <td>
                            <span t-field="consultant.available"/>
                        </td>
                    </tr>
                </t>
            </table>
            <div t-if="pager" class="o_portal_pager text-center">
              <t t-call="website.pager"/>
            </div>
        </t>
      </t>
    </template>

    <template id="consultants_followup" name="Consultant">
      <t t-call="website.layout">
        <div id="wrap">
            <div class="container">
              <div class="oe_structure">
                <div class="row">
                    <div class="col-sm-4">
                        <ol class="breadcrumb mt8">
                            <li><a href="/my/home"><i class="fa fa-home"/></a></li>
                            <li>
                              <a t-attf-href="/my/consultants">My Profiles</a>
                            </li>
                            <li>
                              Consultant
                            </li>
                        </ol>
                    </div>
                </div>
                <div class="row">
                	<div class="col-md-12" style="display: inline-block">
                		<!--a class="btn btn-info" t-att-href="'/web#return_label=Website&amp;model=consultant.consult&amp;id=%s&amp;view_type=form' % (consultant.id)">Edit</a-->
                		<a t-attf-href="/my/consultants/edit/#{consultant.id}?#{keep_query()}" class="btn btn-default">Edit</a>
                		<h1><t t-esc="consultant.name"/></h1> 
                	</div>
                </div>

                <!-- Website edit mode -->
                <!--a t-attf-href="/my/consultants/edit/#{consultant.id}?#{keep_query()}" class="btn btn-default">Edit</a-->

                <br/>
                
                <form action="/my/consultants/#{consultant.id}?#{keep_query()}" method="post">
                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                    <div class="row o_website_portal_details">
                        <div class="col-md-8">
                            <div class="row">
                                <div t-attf-class="form-group col-lg-6">
                                    <label class="control-label" for="available">Next Available</label>
                                    <h3 t-if="consultant.available"><i><span t-field="consultant.available"/></i></h3>
                                    <span t-if="not consultant.available" style="padding-left:10px;">Availability Not Set</span>
                                </div>
                            </div>
                            <div class="row">
                                <div t-attf-class="form-group col-xs-4">
                                    <label class="control-label" for="main_role_ids">Main Roles</label><br/>
                                    <t t-name="kanban-box" t-foreach="consultant.main_role_ids" t-as="main_role"> 
                                        <div class="oe_kanban_details" style="display: inline-block;">
                                            <span t-attf-class="label #{'label-primary'}" t-esc="main_role.name" style="padding-right:15px;"/>
                                        </div>
                                    </t>
                                    <t t-if="not consultant.main_role_ids">
                                        Not Defined
                                    </t>
                                </div>
                                <div t-attf-class="form-group col-xs-4">
                                    <label class="control-label" for="main_competence_ids">Main Competence</label><br/>
                                    <t t-name="kanban-box" t-foreach="consultant.main_competence_ids" t-as="main_competence"> 
                                        <div class="oe_kanban_details" style="display: inline-block;">
                                            <span t-attf-class="label #{'label-primary'}" t-esc="main_competence.name" style="padding-right:15px;"/>
                                        </div>
                                    </t>
                                    <t t-if="not consultant.main_competence_ids">
                                        Not Defined
                                    </t>
                                </div>
                                <div t-attf-class="form-group col-xs-4">
                                    <label class="control-label" for="future_role_ids">Future Roles</label><br/>
                                    <t t-name="kanban-box" t-foreach="consultant.future_role_ids" t-as="future_role"> 
                                        <div class="oe_kanban_details" style="display: inline-block;">
                                            <span t-attf-class="label #{'label-primary'}" t-esc="future_role.name" style="padding-right:15px;"/>
                                        </div>
                                    </t>
                                    <t t-if="not consultant.future_role_ids">
                                        Not Defined
                                    </t>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>

              </div>
              
              </div>
              <div class="oe_structure mb32"/>
          </div>
      </t>
    </template>


	<!-- TODO Consultant Profile - Edit mode -->
    <template id="consultants_profile_update" name="Consultant Profile Update">
      <t t-call="website.layout">
        <div id="wrap">
            <div class="container">
              <div class="oe_structure">
                <div class="row">
                    <div class="col-sm-4">
                        <ol class="breadcrumb mt8">
                            <li><a href="/my/home"><i class="fa fa-home"/></a></li>
                            <li>
                              <a t-attf-href="/my/consultants">My Profiles</a>
                            </li>
                            <li>
                              Consultant
                            </li>
                        </ol>
                    </div>
                </div>

                <form action="/my/consultants/" method="post">
                    <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                    <input name="consultant_id" type="hidden" t-att-value="consultant.id"/>

                    <h1><t t-esc="consultant.name"/></h1>

                    <t t-if="error_message">
                        <h4 class="text-danger" t-esc="error_message" />
                    </t>

                    <div class="col-md-8" style="display: inline-block">
						<button type="submit" class="btn btn-default btn-primary pull-right a-submit">Confirm
							<span class="fa fa-long-arrow-right" />
						</button>
					</div>

                    <div class="col-md-8" style="display: inline-block">
                        <div class="pull-right">
                            <label style="font-size:13px;">
                                <i> By clicking "Confirm", I agree to NOX's 
                                    <a href="javascript:confirmTerms()">Terms and Conditions</a>
                                </i>
                            </label>
                            <input t-if="consultant.user_id.nox_terms_read" type="checkbox" name="web_approved_status" checked="checked" disabled="disabled"/>
                            <input t-if="not consultant.user_id.nox_terms_read" type="checkbox" name="web_approved_status_no" disabled="disabled"/>
                        </div>
                    </div>

                    <div class="row o_website_portal_details" t-if="consultant.user_id.nox_terms_read">
                        <div class="col-md-8">
                            <div class="row">
                                <div t-attf-class="form-group col-lg-6">
                                    <label class="control-label" for="available">Next Available</label>
                                    <br/>
                                    <h4><input type="date" name="next_available" t-att-value="consultant.available"/></h4>
                                </div>
                            </div>
                            
                            <div class="row">
                            	<!-- Main Roles - Upto 5 choices -->
                            	<div id="main_role_selections" t-attf-class="form-group col-lg-4">
                                    <label class="control-label" for="main_roles">Main Roles</label>

                                    <select id="main_role1" name="main_role1" class="form-control" >
                                        <option value="">Select Main Role...</option>
                                        <t t-foreach="main_roles or []" t-as="role">
                                            <option t-att-value="role.id" t-att-selected="role.id == int(consultant.portal_get_main_roles('1'))"> 
                                                <t t-esc="role.name" />
                                            </option>
                                        </t>
                                    </select>
                                    <br/>
                                    <select name="main_role2" class="form-control" >
                                        <option value="">Select Main Role...</option>
                                        <t t-foreach="main_roles or []" t-as="role">
                                        	<option t-att-value="role.id" t-att-selected="role.id == int(consultant.portal_get_main_roles('2'))"> 
                                                <t t-esc="role.name" />
	                                        </option>
                                        </t>
                                    </select>
                                    <br/>
                                    <select name="main_role3" class="form-control" >
                                        <option value="">Select Main Role...</option>
                                        <t t-foreach="main_roles or []" t-as="role">
                                        	<option t-att-value="role.id" t-att-selected="role.id == int(consultant.portal_get_main_roles('3'))"> 
                                                <t t-esc="role.name" />
	                                        </option>
                                        </t>
                                    </select>
                                    <br/>
                                    <select name="main_role4" class="form-control" >
                                        <option value="">Select Main Role...</option>
                                        <t t-foreach="main_roles or []" t-as="role">
                                        	<option t-att-value="role.id" t-att-selected="role.id == int(consultant.portal_get_main_roles('4'))"> 
                                                <t t-esc="role.name" />
	                                        </option>
                                        </t>
                                    </select>
                                    <br/>
                                    <select name="main_role5" class="form-control" >
                                        <option value="">Select Main Role...</option>
                                        <t t-foreach="main_roles or []" t-as="role">
                                        	<option t-att-value="role.id" t-att-selected="role.id == int(consultant.portal_get_main_roles('5'))"> 
                                                <t t-esc="role.name" />
	                                        </option>
                                        </t>
                                    </select>
                                </div>

                                <!-- Main Competence - Upto 5 choices -->
                            	<div t-attf-class="form-group col-lg-4">
                                    <label class="control-label" for="main_competence">Main Competence</label>

                                    <select name="main_competence1" class="form-control" >
                                        <option value="">Select Main Competence...</option>
                                        <t t-foreach="main_competence or []" t-as="competence">
                                            <option t-att-value="competence.id" t-att-selected="competence.id == int(consultant.portal_get_main_competence('1'))"> 
                                                <t t-esc="competence.name" />
                                            </option>
                                        </t>
                                    </select>
                                    <br/>
                                    <select name="main_competence2" class="form-control" >
                                        <option value="">Select Main Competence...</option>
                                        <t t-foreach="main_competence or []" t-as="competence">
                                            <option t-att-value="competence.id" t-att-selected="competence.id == int(consultant.portal_get_main_competence('2'))"> 
                                                <t t-esc="competence.name" />
                                            </option>
                                        </t>
                                    </select>
                                    <br/>
                                    <select name="main_competence3" class="form-control" >
                                        <option value="">Select Main Competence...</option>
                                        <t t-foreach="main_competence or []" t-as="competence">
                                            <option t-att-value="competence.id" t-att-selected="competence.id == int(consultant.portal_get_main_competence('3'))"> 
                                                <t t-esc="competence.name" />
                                            </option>
                                        </t>
                                    </select>
                                    <br/>
                                    <select name="main_competence4" class="form-control" >
                                        <option value="">Select Main Competence...</option>
                                        <t t-foreach="main_competence or []" t-as="competence">
                                            <option t-att-value="competence.id" t-att-selected="competence.id == int(consultant.portal_get_main_competence('4'))"> 
                                                <t t-esc="competence.name" />
                                            </option>
                                        </t>
                                    </select>
                                    <br/>
                                    <select name="main_competence5" class="form-control" >
                                        <option value="">Select Main Competence...</option>
                                        <t t-foreach="main_competence or []" t-as="competence">
                                            <option t-att-value="competence.id" t-att-selected="competence.id == int(consultant.portal_get_main_competence('5'))"> 
                                                <t t-esc="competence.name" />
                                            </option>
                                        </t>
                                    </select>
                                </div>

                                <!-- Future Roles - Upto 3 choices -->
                            	<div t-attf-class="form-group col-lg-4">
                                    <label class="control-label" for="future_roles">Future Roles</label>

                                    <select name="future_role1" class="form-control" >
                                        <option value="">Select Future Role...</option>
                                        <t t-foreach="future_roles or []" t-as="frole">
                                            <option t-att-value="frole.id" t-att-selected="frole.id == int(consultant.portal_get_future_roles('1'))"> 
                                                <t t-esc="frole.name" />
                                            </option>
                                        </t>
                                    </select>
                                    <br/>
                                    <select name="future_role2" class="form-control" >
                                        <option value="">Select Future Role...</option>
                                        <t t-foreach="future_roles or []" t-as="frole">
                                            <option t-att-value="frole.id" t-att-selected="frole.id == int(consultant.portal_get_future_roles('2'))"> 
                                                <t t-esc="frole.name" />
                                            </option>
                                        </t>
                                    </select>
                                    <br/>
                                    <select name="future_role3" class="form-control" >
                                        <option value="">Select Future Role...</option>
                                        <t t-foreach="future_roles or []" t-as="frole">
                                            <option t-att-value="frole.id" t-att-selected="frole.id == int(consultant.portal_get_future_roles('3'))"> 
                                                <t t-esc="frole.name" />
                                            </option>
                                        </t>
                                    </select>
                                </div>

                                <input type="hidden" name="redirect" t-att-value="redirect"/>

                            </div>

                        </div>
                    </div>


                    <div class="row o_website_portal_details" t-if="not consultant.user_id.nox_terms_read">
                        <div class="col-md-8">
                            <div class="row">
                                <div t-attf-class="form-group col-lg-6">
                                    <label class="control-label" for="available">Next Available</label>
                                    <br/>
                                    <h4><input type="date" name="next_available" t-att-value="consultant.available" readonly="readonly"/></h4>
                                </div>
                            </div>
                            
                            <div class="row">
                                <!-- Main Roles - Upto 5 choices -->
                                <div id="main_role_selections" t-attf-class="form-group col-lg-4">
                                    <label class="control-label" for="main_roles">Main Roles</label>

                                    <select id="main_role1" name="main_role1" class="form-control" readonly="readonly">
                                        <option value="">Select Main Role...</option>
                                    </select>
                                    <br/>
                                    <select name="main_role2" class="form-control" readonly="readonly">
                                        <option value="">Select Main Role...</option>
                                    </select>
                                    <br/>
                                    <select name="main_role3" class="form-control" readonly="readonly">
                                        <option value="">Select Main Role...</option>
                                    </select>
                                    <br/>
                                    <select name="main_role4" class="form-control" readonly="readonly">
                                        <option value="">Select Main Role...</option>
                                    </select>
                                    <br/>
                                    <select name="main_role5" class="form-control" readonly="readonly">
                                        <option value="">Select Main Role...</option>
                                    </select>
                                </div>

                                <!-- Main Competence - Upto 5 choices -->
                                <div t-attf-class="form-group col-lg-4">
                                    <label class="control-label" for="main_competence">Main Competence</label>

                                    <select name="main_competence1" class="form-control" readonly="readonly">
                                        <option value="">Select Main Competence...</option>
                                    </select>
                                    <br/>
                                    <select name="main_competence2" class="form-control" readonly="readonly">
                                        <option value="">Select Main Competence...</option>
                                    </select>
                                    <br/>
                                    <select name="main_competence3" class="form-control" readonly="readonly">
                                        <option value="">Select Main Competence...</option>
                                    </select>
                                    <br/>
                                    <select name="main_competence4" class="form-control" readonly="readonly">
                                        <option value="">Select Main Competence...</option>
                                    </select>
                                    <br/>
                                    <select name="main_competence5" class="form-control" readonly="readonly">
                                        <option value="">Select Main Competence...</option>
                                    </select>
                                </div>

                                <!-- Future Roles - Upto 3 choices -->
                                <div t-attf-class="form-group col-lg-4">
                                    <label class="control-label" for="future_roles">Future Roles</label>

                                    <select name="future_role1" class="form-control" readonly="readonly">
                                        <option value="">Select Future Role...</option>
                                    </select>
                                    <br/>
                                    <select name="future_role2" class="form-control" readonly="readonly">
                                        <option value="">Select Future Role...</option>
                                    </select>
                                    <br/>
                                    <select name="future_role3" class="form-control" readonly="readonly">
                                        <option value="">Select Future Role...</option>
                                    </select>
                                </div>

                                <input type="hidden" name="redirect" t-att-value="redirect"/>

                            </div>

                        </div>
                    </div>
                </form>

            </div>
              
            </div>
            <div class="oe_structure mb32"/>
              
            <xpath expr="//div['@id=wrap']" position="inside">
                <div class="confirm-popup">
                    <header><div class="popup-title">NOX's Terms &amp; Conditions</div></header>
                    <hr/>
                    <section>
                        <p class="popup-text"><t t-raw="nox_terms"/></p>
                    </section>
                    <br/><br/>
                    <section class="popup-buttons">
                        <input type="hidden" id="consultantid" t-att-value="consultant.id"/>
                        <button id="button_accept" t-if="not consultant.user_id.nox_terms_read" class="btn btn-default btn-primary btn-popup-update">Accept</button>
                        <button t-if="not consultant.user_id.nox_terms_read" class="btn btn-default btn-popup-reject">Reject</button>
                        <button t-if="consultant.user_id.nox_terms_read" class="btn btn-default btn-popup-reject">Close</button>

                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                    </section>
                </div>
                <script>
                    $('.btn-popup-reject').on('click', function (e) {
                        $('.confirm-popup').hide();
                    });
                    $('.btn-popup-update').on('click', function (e) {
                        $('.confirm-popup').hide();

                        $.get("/website/confirm-web-approved", function(data){
                            var consultantid = document.getElementById('consultantid');
                            window.location.href = '/my/consultants/edit/' + consultantid.value; 
                        });

                    });
                </script>
            </xpath>

          </div>
      </t>
    </template>

</odoo>